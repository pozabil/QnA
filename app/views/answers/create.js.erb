$('.notice').html('')

<% if @answer.persisted? %>
	$('.new-answer .answer-errors').html('')
	$('.answers table').append('<%= j render @answer %>')
	$('.new-answer #answer_body').val('')
	$('.new-answer input[type="hidden"][name="answer[files][]"]').remove()
	$('.new-answer #answer_files').val(null)
	$('.new-answer #answer_files').prop('disabled', false)
	$('.notice').html('<%= notice %>')
	$('.new-answer .nested-fields').not(':first').remove()
	$('.new-answer .nested-fields div :text').val(null)
<% else %>
	$('.new-answer .answer-errors').html('<%= render 'shared/errors', resource: @answer %>')
<% end %>
